<div class="units-row units-split bck-nav-som" style="padding-top:5px" >
    <div class="unit-70">
        <span><h3 style="color:#FFFFFF">&nbsp <i class="fa  fa-volume-up"></i> &nbsp Som</h3></span>
    </div>
    <div class="units-30">
        <span><h3 style="color:#FFFFFF;margin-right:10px"class="right watch"></h3></span>
    </div>
</div>

<div>
    <span><h2 id="text-active" class="text-centered" style="padding-top:5px;color:#807f7f;margin-bottom:30px"> Perfil Activo  </h2></span>
</div>

<div id="modos-text" class="units-row text-centered transparent-grey" style="height:50px">
    <h2  class="units-row units-split">
        <div class="unit-30 btn-arrow-left cursor-ptr"><span>&lt</span></div>
        <div id="text-nenhum" class="unit-40 ">Nenhum </div>
        <div class="unit-30 btn-arrow-right cursor-ptr"><span>&gt</span></div>
    </h2>
    
    <h2 class="units-row units-split">
        <div class="unit-30 btn-arrow-left cursor-ptr"><span>&lt</span></div>
        <div id="text-manual" class="unit-40 ">Manual </div>
        <div class="unit-30 btn-arrow-right cursor-ptr"><span>&gt</span></div>
    </h2>
    
    <h2 class="units-row units-split">
        <div class="unit-30 btn-arrow-left cursor-ptr"><span>&lt</span></div>
        <div id="text-constante" class="unit-40 ">Constante </div>
        <div class="unit-30 btn-arrow-right cursor-ptr"><span>&gt</span></div>
    </h2>
    
    <h2 class="units-row units-split">
        <div class="unit-30 btn-arrow-left cursor-ptr"><span>&lt</span></div>
        <div id="text-posicao" class="unit-40 ">Posição </div>
        <div class="unit-30 btn-arrow-right cursor-ptr"><span>&gt</span></div>
    </h2>
</div>

<div   style="float:left;margin-left:0px;margin-right:0px;margin-top:-35px;color:white;width=100%;background-color:#2575ed;">
    <h2 id="info-mode" style="color:white"></h2>
</div>
<div id="choices" style="margin-top:-40px">
    <div class="units-row units-split end-screen" style="padding-top:80px">
        <div id="d-nenhum" class="unit-50 btn btn-black" disabled>
            <i class="fa fa-cogs fa-2x"></i>
        </div>
        <div id="h-nenhum" class="unit-50 btn btn-blue cursor-help" disabled>
            <i class="fa fa-info fa-2x"></i>
        </div>
    </div>
    
    <div class="units-row units-split end-screen" style="padding-top:80px">
        <div id="d-manual" class="options unit-50 btn btn-black">
            <i class="fa fa-cogs fa-2x"></i>
        </div>
        <div id="h-manual" class="unit-50 btn btn-blue cursor-help">
            <i class="fa fa-info fa-2x"></i>
        </div>
    </div>
    
    <div class="units-row units-split end-screen" style="padding-top:80px">
        <div id="d-constante" class="options unit-50 btn btn-black">
            <i class="fa fa-cogs fa-2x"></i>
        </div>
        <div id="h-constante"class="unit-50 btn btn-blue cursor-help">
            <i class="fa fa-info fa-2x"></i>
        </div>
    </div>
    
    <div class="units-row units-split end-screen" style="padding-top:80px">
        <div id="d-posicao" class="options unit-50 btn btn-black">
            <i class="fa fa-cogs fa-2x"></i>
        </div>
        <div id="h-posicao"class="unit-50 btn btn-blue cursor-help">
            <i class="fa fa-info fa-2x"></i>
        </div>
    </div>
</div>

    <script>        
        $('#modos-text').slick({
            slidesToShow: 1,
            dots: true
        });
        $('#choices').slick({
            slidesToShow: 1,
            swipe: false,
            asNavFor: '#modos-text'
        });
        
        $(".btn-arrow-left").click(function(){
            $('#modos-text').slick('slickPrev');
            if(helpPressed){
                $('#info-mode').html('');
                helpPressed = !helpPressed;
            }
            somActiveMode = $('#modos-text').slick('slickCurrentSlide');
            $("#choices").slick("slickGoTo", somActiveMode, true);
        });
        
        $(".btn-arrow-right").click(function(){
            $('#modos-text').slick('slickNext');
            if(helpPressed){
                $('#info-mode').html('');
                helpPressed = !helpPressed;
            }
            somActiveMode = $('#modos-text').slick('slickCurrentSlide');
            $("#choices").slick("slickGoTo", somActiveMode, true);
        });
        
        $('#modos-text').on('swipe',function(event,slick,direction){
            lock = true;

            somActiveMode = $('#modos-text').slick('slickCurrentSlide');
        });
        $('#modos-text').on('afterChange',function(event,slick,currentSlide){
				lock = false;
                if(helpPressed){
                    $('#info-mode').html('');
                    helpPressed = !helpPressed;
                }
                $("#choices").slick("slickGoTo", somActiveMode, true);
        });
        
        $("#d-manual").click(function() {
            if(!lock){
                load_page("som-modo-manual.html",true,function(){
                    var elemModoManual = document.querySelector('.js-som-modo-manual');
                    var initCust = new Powerange(elemModoManual, { min: -100, max: 100, hideRange: true, callback: setVolume, klass: 'power-ranger', start: somModoManual });
                    function setVolume(){
                        somModoManual = elemModoManual.value;
                        if (somModoManual>0){
                            $("#dcbs").html("+" + String(somModoManual) + " db");
                        } else {
                            $("#dcbs").html(String(somModoManual) + " db");
                        }
                    };
                }) 
                up();
                activated = !activated;
            }
            return false;
				
        });

        $("#d-constante").click(function() {
            if(!lock){
                load_page("som-modo-constante.html",true,function(){
                    var elemModoConstante = document.querySelector('.js-som-modo-constante');
                    var initCust = new Powerange(elemModoConstante, { min: 0, max: 100, callback: setVolumeConst, klass: 'power-ranger', start: somModoConstante });
                    function setVolumeConst(){
                        somModoConstante = elemModoConstante.value;
                        $("#dcbs-const").html(String(somModoConstante));
                    };
                }) 
                up();
                activated = !activated;
            }
            return false;
				
        });
        
        $("#d-posicao").click(function() {
            if(!lock){
                load_page("som-posicao.html",true,function(){
                    /*
                    var $draggable = $('#position').draggabilly({
                        containment: '.container'
                    });
                    var draggie = $draggable.data('draggabilly');
                    $('#position').css({"top":positionXY[0], "left":positionXY[1]});

                    $draggable.on( 'pointerUp', function( event, pointer ) {
                        setTimeout(function() {
                            positionXY[0] = $("#position").css("top");
                            positionXY[1] = $("#position").css("left");
                        },500);
                    })*/
                    new Dragdealer('position-bounds', {
                        x: positionXY[0],
                        y: positionXY[1],
                        horizontal: true,
                        vertical: true,
                        animationCallback: function(x, y) {
                            console.log(x,y);
                            positionXY[0] = x;
                            positionXY[1] = y;
                        }
                    });
                    positionXY[0]
                });
                up();
                activated = !activated;
            }
            return false;
				
        });
        
        $("#h-manual").click(function() {
           if(helpPressed){
                $('#info-mode').html('');
           } else {
                $('#info-mode').html('Permite aumentar ou diminuir o volume em X decibeis relativo ao real.');   
           }
            helpPressed = !helpPressed;
        });
        
        $("#h-constante").click(function() {
           if(helpPressed){
                $('#info-mode').html('');
           } else {
                $('#info-mode').html('Permite escolher um volume, independente do volume real.');   
           }
            helpPressed = !helpPressed;
        });
        
        $("#h-posicao").click(function() {
           if(helpPressed){
                $('#info-mode').html('');
           } else {
                $('#info-mode').html('Permite escolher o volume como se estivesse numa posição relativa ao palco.');   
           }
            helpPressed = !helpPressed;
        });
        $("#text-constante").click(function(){
            $("#d-constante").trigger("click");
        });
        $("#text-manual").click(function(){
            $("#d-manual").trigger("click");
        });
        $("#text-posicao").click(function(){
            $("#d-posicao").trigger("click");
        });
	</script>
